# LexicONE

Приложение для запоминания английских слов и фраз с повторением по расписанию.

## Что умеет

- Добавление слов и переводов
- Быстрое повторение по очереди
- Регистрация и хранение слов в базе данных
- Гостевой режим с локальным сохранением в браузере
- Поиск по словарю и скрытие переводов

## Алгоритм повторения

- 0–14 дней после добавления: слово появляется ежедневно, даже при ответе "Помню".
- 14–30 дней: частота снижается вдвое — раз в 2 дня.
- После 30 дней: слово появляется случайно среди всех слов словаря.
- При ответе "Не помню": слово возвращается к ежедневному повторению.

## Логика статистик прогресса

- **Total words** — общее количество слов в словаре.
- **Words mastered** — слова, которым 30+ дней с момента добавления.
- **Due** — слова, у которых `nextReview` наступил.
- **Daily goal %** — процент выполнения дневной цели:  
  `min(100, round(todayReviews / DAILY_GOAL * 100))`.
- **Daily streak** — количество подряд идущих дней, когда было хотя бы одно повторение.
  При первом действии streak = 1, при пропуске дня — сбрасывается.

## Запуск

1. Установите зависимости:
```bash
npm install
```

2. (Опционально) Подключите Supabase:

- Создайте проект в Supabase и возьмите URL/Anon key.
- Создайте файл `.env.local`:
```bash
NEXT_PUBLIC_SUPABASE_URL=...
NEXT_PUBLIC_SUPABASE_ANON_KEY=...
```
- Примените миграцию из `supabase/migrations/001_words.sql`.

3. Запустите проект:
```bash
npm run dev
```

## Фонетическая проверка произношения (Google Cloud Speech)

Чтобы включить фонетическую проверку в блоке Quick Review, добавьте в `.env.local`
один из вариантов:

**Вариант 1 (рекомендуется): JSON сервисного аккаунта**
```
GOOGLE_CLOUD_CREDENTIALS=...json_or_base64...
```

**Вариант 2: путь к ключу**
```
GOOGLE_APPLICATION_CREDENTIALS=/absolute/path/to/key.json
```

Проверка использует Google Cloud Speech‑to‑Text. Оценка рассчитывается
по распознанному тексту (accuracy + completeness + confidence).

Откройте [http://localhost:3000](http://localhost:3000) в браузере.

## Примечания

- Без Supabase слова сохраняются только в браузере пользователя (localStorage).
- С Supabase доступна регистрация и синхронизация между устройствами.
- Для генерации естественных примеров добавьте в `.env.local`:
```
DEEPSEEK_API_KEY=...
```
